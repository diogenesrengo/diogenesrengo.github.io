<!DOCTYPE html>
<html>
<head>
<style>
    #cw {
        position: fixed;
        z-index: -1;
    }
    body {
        margin: 0;
        padding: 0;
        background-image: url('img_girl.jpg');
    }
</style>
</head>
<body>

<canvas id="cw" width="400" height="400" style="border:1px solid #000000;">
Your browser does not support the HTML canvas tag.
</canvas>

<script>
    const canvas = document.getElementById("cw");
    const c = canvas.getContext("2d");
    c.globalAlpha = 0.5;

    const cursor = {
        x: innerWidth / 2,
        y: innerHeight / 2,
    };

    let particlesArray = [];

    generateParticles(10);
    setSize();
    anim();

    addEventListener("resize", () => setSize());

    function generateParticles(amount) {
        for (let i = 0; i < amount; i++) {
            particlesArray[i] = new Particle(
                innerWidth / 2,
                innerHeight / 2,
                4,
                generateColor(),
                0.02,
            );
        }
    }

    function generateColor() {
        let hexSet = "0123456789ABCDEF";
        let finalHexString = "#";
        for (let i = 0; i < 6; i++) {
            finalHexString += hexSet[Math.ceil(Math.random() * 15)];
        }
        return finalHexString;
    }

    function setSize() {
        canvas.height = innerHeight;
        canvas.width = innerWidth;
    }

    function Particle(x, y, particleTrailWidth, strokeColor, rotateSpeed) {
        this.x = x;
        this.y = y;
        this.particleTrailWidth = particleTrailWidth;
        this.strokeColor = strokeColor;
        this.theta = Math.random() * Math.PI * 2;
        this.rotateSpeed = rotateSpeed;
        this.t = Math.random() * 150;

        this.rotate = () => {
            const ls = {
                x: this.x,
                y: this.y,
            };
            this.theta += this.rotateSpeed;
            this.x = cursor.x + Math.cos(this.theta) * this.t;
            this.y = cursor.y + Math.sin(this.theta) * this.t;
            
            //this.x = cursor.x + 10;
            //this.y = cursor.y + 10;
            
            c.beginPath();
            c.lineWidth = this.particleTrailWidth;
            c.strokeStyle = this.strokeColor;
            c.moveTo(ls.x, ls.y);
            c.lineTo(this.x, this.y);
            c.stroke();
        };
    }

    function anim() {
        requestAnimationFrame(anim);
        c.fillStyle = "rgb(255 255 255 / 5%)";
        //c.fillRect(0, 0, canvas.width, canvas.height);
        c.clearRect(0, 0, canvas.width, canvas.height);
        particlesArray.forEach((particle) => particle.rotate());
    }
</script>

</body>
</html>
